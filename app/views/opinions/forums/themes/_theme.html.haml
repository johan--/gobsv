.wrapper-wage-video
  %p.subject
    Tema
  %h1.problem-title
    = theme.name
  %h2.problem-description
    = simple_format theme.description
  - if theme.video_url
    = link_to image_tag("forums/play-icon.png"), theme.video_url, class: "play-video", title: theme.name
  .clearfix
  = link_to image_tag("forums/goto.png"), "#wrapper-positions", class: "go-to-positions"
#wrapper-positions
  .container
    .wage-authorities-position
      %h2
        Posturas de los actores de la sociedad
      %p.description-topic
        = theme.actors_description
      .list
        %ul#lightSlider
          - theme.postures.latest.each_with_index do |posture, i|
            %li.slide{ class: i % 2 == 0 ? 'blue-slide-bg' : 'sky-slide-bg' }
              - if posture.organization.logo.present?
                %p
                  = image_tag(posture.organization.logo.url(:small))
              %h3.institution
                = posture.organization.name
              %p.quote
                = posture.quote
              %p.author
                = posture.actor.name
              - if posture.entry.present?
                = link_to "ver fuente", "#", class: "source"
              .row.like-or-dislike
                .col-xs-6
                  %span
                    = link_to image_tag("forums/icon-heart.png"), "#"
                  %span
                    0
                .col-xs-6
                  %span
                    = link_to image_tag("forums/icon-sadface.png"), "#"
                  %span
                    0
    .wage-people-position
      %h2
        Posturas de los ciudadanos
      %p.description-topic
        = theme.citizens_description
    #citizens_postures
    .submit-position
      .row
        .col-sm-8.default-margin
          %textarea{name: "twitter_text", id: "twitter_text_id", maxlength: "123", class: "form-control", rows: "3"}
        .col-sm-4.default-margin
          %input{type: "button", class: "btn btn-warning btn-custom-reply", :"data-url" => "https://twitter.com/intent/tweet", id: "twitter_popup", value: "Escribe tu postura"}

.wage-historic-timeline
  .container
    %h2
      Histórico del tema
    %p.description-topic
      = theme.historical_description
    = search_form_for @q, url: opinions_root_url, class: 'autoSb' do |f|
      .filters
        Filtrar por
        .row
          .col-md-3.col-sm-6.default-margin
            = f.select :organization_id_eq, options_for_select(@medias.map{ |s| [s.name, s.id] }), {prompt: 'Todos los medios de comunicación'}, {:class => 'form-control'}
          .col-md-3.col-sm-6.default-margin
            = f.select :organization_id_eq, options_for_select(@politics.map{ |s| [s.name, s.id] }), {prompt: 'Todos los partidos políticos'}, {:class => 'form-control'}
          .col-md-3.col-sm-6.default-margin
            = f.select :kind_eq, options_for_select([ "PDF", "VIDEOS", "AUDIOS", "DOC", "Todos los multimedia" ], 'Todos los multimedia'), {}, {:class => 'form-control'}
          .col-md-3.col-sm-6.default-margin
            = f.select :kind_eq, options_for_select([ "Twitter", "Facebook", "Todas las redes sociales" ], 'Todas las redes sociales'), {}, {:class => 'form-control'}
    %section#cd-timeline.cd-container
      = render @entries

:javascript
  $(document).ready(function(){
    $('#twitter_popup').on("click", function(event) {

      var input_msg = document.getElementById('twitter_text_id').dataset.url
      var msg = "?text=" + encodeURIComponent(input_msg);
      var tag = encodeURIComponent(" #SalarioMinimoSV");
      var msg_tag = msg + tag;

      var width  = 575,
      height = 430,
      left   = ($(window).width()  - width)  / 2,
      top    = ($(window).height() - height) / 2,
      url    = this.dataset.url + msg_tag,
      opts   = 'status=1' + ',width='  + width  + ',height=' + height + ',top='    + top    + ',left='   + left;

      window.open(url, 'twitter', opts);
      return false;
    });

    var config3 = {
      "id": "#{theme.twitter_id}",
      "domId": 'citizens_postures',
      "maxTweets": 6,
      "enableLinks": true,
      "showImages": true,
      "lang": 'es'
    };
    twitterFetcher.fetch(config3);

  });
